# Скрипт для автоматичного резервного копіювання MikroTik з відправкою на Email

Цей скрипт для RouterOS автоматизує процес створення резервних копій конфігурації MikroTik та відправляє їх на вказану електронну адресу. Він створює як текстовий експорт конфігурації (`.rsc`), так і бінарний файл резервної копії (`.backup`), захищений паролем.

## Основні можливості:

* **Два типи резервних копій:**
    * Створення файлу експорту конфігурації (`/export file=filename.rsc`).
    * Створення повного бінарного файлу резервної копії (`/system backup save name=filename.backup`) з шифруванням AES-SHA256.
* **Відправка на Email:** Надсилає обидва файли резервних копій як вкладення на вказану електронну адресу.
* **Інформативний лист:** Тіло листа містить:
    * Детальну інформацію про систему (ім'я пристрою, модель, версія RouterOS, версія прошивки).
    * Статистику використання ресурсів (вільний дисковий простір, вільна оперативна пам'ять, час безперервної роботи).
    * Критичні (`critical`) та помилкові (`error`) повідомлення з логів маршрутизатора за поточний день.
* **Іменування файлів:** Файли резервних копій іменуются з використанням імені системи та мітки часу (РРРР-Місяць-ДД-ГГХХ) для легкої ідентифікації та сортування.
* **Автоматичне очищення:** Видаляє файли резервних копій з маршрутизатора після успішної відправки електронного листа.
* **Обробка помилок:** Вбудована логіка для обробки можливих помилок на етапах створення резервних копій, відправки листа та видалення файлів.
* **Проста конфігурація:** Основні параметри (адреса електронної пошти, пароль шифрування) легко налаштовуються на початку скрипта.

## Конфігурація:

1.  **Налаштуйте змінні на початку скрипта:**
    * `EmailTo`: Ваша адреса електронної пошти для отримання резервних копій.
    * `BackupEncryptionPassword`: Пароль для шифрування бінарного файлу резервної копії. **Важливо:** Починаючи з RouterOS v6.43, якщо пароль не вказано, файл `.backup` не буде зашифровано.
2.  **Налаштуйте Email на MikroTik:** Переконайтеся, що на вашому маршрутизаторі налаштовано відправку пошти через `/tool e-mail`. Вам потрібно вказати SMTP-сервер, порт, логін та пароль (якщо потрібно). https://help.mikrotik.com/docs/spaces/ROS/pages/24805377/E-mail

## Використання:

1.  Скопіюйте скрипт до вашого маршрутизатора MikroTik (наприклад, через WinBox, SSH або завантаживши у `Files`).
2.  Найкращий спосіб використання – додати скрипт до планувальника (`/system scheduler`) для регулярного автоматичного запуску (наприклад, щодня).

## Сумісність:

* Скрипт розроблено та протестовано для RouterOS v7.x.
* Функція шифрування паролем для `.backup` файлів вимагає RouterOS v6.43 або новішої версії.
